# MedaSync

Small coding assignment for MedaSync.
The basic structure of this problem is broken up by module - each module contains one main function (maybe with a small helper function). I wrote the program in JavaScript, as that is the language I've used most, to be run using Node.js.
The program starts when index.js is called - if pass it a file (or a list of files) to be read at the command line, it immediately sends those files to the readFile function. If not, it prompts the user for a file name, then sends that file to the readFile function.
The readFile function then uses the fs module from node to try to read the file. If the filename is invalid, it console logs an error. Otherwise, it reads the file and sends the lines of the file in an array to processInput. It takes an optional readline argument - if we are getting the file via stdin, we want to close the input after the file is read.
The function processInput is the most complex part of the code. It first breaks up the input line into words. Then, if the first word is "Patient", it creates a new patient in a "patients" object. We make this an object rather than an array so we can access a patient by name. Each entry in the patient object is a key (the patient's name) and a value - which is an object of the actions taken on that patient. If the first word is "Action", we add the appropriate type of action, either by setting the intake or discharge date, or by adding an element to the treatments array. Finally, after all lines have been processed, the processInput function sends the patients object to printPatients, and returns the patients object so it can be easily stored.
The printPatients file iterates through the patients object, and outputs each patient's length of stay (calculated using a helper function timeDiff) and the number of treatments they had. Additionally, this iteration checks to make sure each patient entry corresponds to the requirements (at least one treatment, etc.). If something is wrong in the input for a particular patient, the printPatient function will console log the first error it encounters for that patient.

I used readFile.test.js to test a few possible cases using Jest. I decided to test nearly the whole program (ie, starting at readFile and ending at printPatients) rather than by module simply to avoid unnecessary complexity for the scope of this problem. I wanted to make sure the program would appropriately handle correctly formatted input, and would output appropriate errors for input that doesn't fit the problem parameters. I made the errors just by modifying the example case given in the problem specification. Since all the program is supposed to is output appropriate information, I just tested to make sure the console.logs looked correct. I did not test index.js in Jest since all that does is send our file to readFile, and I easily tested that manually from the command line.
